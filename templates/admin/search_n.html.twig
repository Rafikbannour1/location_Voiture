{% extends 'base.html.twig' %}

{% block title %}Liste des utilisateurs   {% endblock %}
{% block body %}   

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Responsive Bootstrap Advance Admin Template</title>

    <!-- BOOTSTRAP STYLES-->
    <link href="assets/css/bootstrap.css" rel="stylesheet" />
    <!-- FONTAWESOME STYLES-->
    <link href="assets/css/font-awesome.css" rel="stylesheet" />
    <!--CUSTOM BASIC STYLES-->
    <link href="assets/css/basic.css" rel="stylesheet" />
    <!--CUSTOM MAIN STYLES-->
    <link href="assets/css/custom.css" rel="stylesheet" />
    <!-- GOOGLE FONTS-->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css' />


  
 
        <!-- /. NAV SIDE  -->
        <div id="page-wrapper">
            <div id="page-inner">
                <div class="row">
                    <div class="col-md-12">
                        <h1 class="page-head-line">Mes Utilisateurs</h1>
                        <h1 class="page-subhead-line"> </h1>

                    </div>
                </div>
                <!-- /. ROW  -->
              
            <div class="row">
                <div class="col-md-6">
                  <!--   Kitchen Sink -->
                    <div class="panel panel-default">
                        <div class="panel-heading">
                           Mes Utilisateurs 
                        </div>
                        <div class="panel-body">
                            <div class="table-responsive">
                             {{ form_start(form) }}
     
                                    {{ form_row(form.email) }}  
                                    <button class="btn btn-outline-success" type="submit">Search</button>
                            
                                {{ form_end(form) }}  
                               <center>
                                 <div class="row">
                <div class="col-lg-12">
                    <!-- Advanced Tables -->
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            Tous les voitures
                        </div>
                      
                               <table class="table table-striped">
                                    <thead>
                                        <tr>
                              <th>Email</th>
                                            <th>Rôles</th>
                                            <th>Actions</th>
                                            
                                        </tr>
                                    </thead>
                                    <tbody>
                                                     
                                        {% for user in users %}
                                        <tr>
                                            <td>{{ user.id }}</td>
                                            <td>{{ user.email }}</td>
                                            <td>
                                                {# On boucle sur les rôles #}
                                                {% for role in user.roles %}
                                                    {% if role == "ROLE_USER" %}
                                                        Client
                                                    {% elseif role == "ROLE_EDITOR" %}
                                                        Editeur
                                                    {% elseif role == "ROLE_ADMIN" %}
                                                        Administrateur
                                                    {% endif %}
                                                {% endfor %}
                                            </td>  
                                            <td><a href="{{ path('modifier_utilisateur', {'id': user.id}) }}">Modifier</a>   
                    
                                                <form method="post" action="{{ path('user_delete', {'id': user.id}) }}" 
                                                onsubmit="return confirm('Are you sure you want to delete this ?');">
                                                   <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ user.id) }}">
                                                   <button class="btn">Delete</button>
                                               </form>   
                                             
                                               </td>  
                                               </tr>  
                                               {% endfor %}
                                    </tbody>
                                </table>


                                </center>
                            </div>
                        </div>
                    </div>
                     <!-- End  Kitchen Sink -->
                </div>
               
            </div>
                <!-- /. ROW  -->

            </div>
            <!-- /. PAGE INNER  -->
        </div>
        <!-- /. PAGE WRAPPER  -->
    </div>
    <!-- /. WRAPPER  -->
    <div id="footer-sec">
        &copy; 2014 YourCompany | Design By : <a href="http://www.binarytheme.com/" target="_blank">BinaryTheme.com</a>
    </div>
    <!-- /. FOOTER  -->
    <!-- SCRIPTS -AT THE BOTOM TO REDUCE THE LOAD TIME-->
    <!-- JQUERY SCRIPTS -->
    <script src="assets/js/jquery-1.10.2.js"></script>
    <!-- BOOTSTRAP SCRIPTS -->
    <script src="assets/js/bootstrap.js"></script>
     <!-- METISMENU SCRIPTS -->
    <script src="assets/js/jquery.metisMenu.js"></script>
    <!-- CUSTOM SCRIPTS -->
    <script src="assets/js/custom.js"></script>


{% endblock %}    